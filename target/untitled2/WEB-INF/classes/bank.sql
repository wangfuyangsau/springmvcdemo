-- MySQL Script generated by MySQL Workbench
-- Wed Apr  1 13:30:21 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema bank
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema bank
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `bank`;
CREATE SCHEMA IF NOT EXISTS `bank` DEFAULT CHARACTER SET utf8 ;
USE `bank` ;

-- -----------------------------------------------------
-- Table `bank`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bank`.`user` (
    `userName` VARCHAR(20) NULL,
    `userIdentify` VARCHAR(18) NOT NULL,
    `userTelnum` VARCHAR(11) NULL,
    `userAddress` VARCHAR(100) NOT NULL,
    PRIMARY KEY (`userIdentify`)
)  ENGINE=INNODB COMMENT='用户信息表';
-- -----------------------------------------------------
-- Table `bank`.`account`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bank`.`account` (
    `accountCardId` VARCHAR(20) NOT NULL,
    `accountBalance` decimal(18,2) NULL COMMENT '保留2位数',
    `userIdentify` VARCHAR(18) NOT NULL,
    `accountPassword` VARCHAR(10) NOT NULL,
    `accountType` VARCHAR(10) NULL,
    `accountLimit` decimal(18,2) NOT NULL COMMENT '保留2位',
    `accountLimitDate` INT NOT NULL,
    `accountStatus` VARCHAR(12) NOT NULL DEFAULT "normal",
    `accountCreateDate` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ,
    PRIMARY KEY (`accountCardId`),
    CONSTRAINT `userIdentify` FOREIGN KEY (`userIdentify`)
        REFERENCES `bank`.`user` (`userIdentify`)
        ON DELETE CASCADE ON UPDATE CASCADE
)  ENGINE=INNODB COMMENT='账户表';


-- -----------------------------------------------------
-- Table `bank`.`bill`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bank`.`bill` (
    `billId` INT NOT NULL AUTO_INCREMENT,
    `accountCardId`  VARCHAR(20) NULL,
    `billAffairType` VARCHAR(12) NULL,
    `billTradeTime`  DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ,
    `billTradeBalance` decimal(18,2) NULL COMMENT '保留2位数',
    `billCurrencyType` varchar(20) NOT NULL,
    PRIMARY KEY (`billId`),
    CONSTRAINT `accountCardId` FOREIGN KEY (`accountCardId`)
        REFERENCES `bank`.`account` (`accountCardId`)
        ON DELETE CASCADE ON UPDATE CASCADE
)  ENGINE=INNODB COMMENT='账单表';
-- 创建汇率转换表
CREATE TABLE IF NOT EXISTS `bank`.`rate` (
  `id` int not null AUTO_INCREMENT,
  `foreignCurrency` VARCHAR(20) NOT NULL,
  `rate` decimal(18,2) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
COMMENT = '外汇转换表，基准货币为人民币';